const axios = require('axios');

const vesselUrl = [
  { name: 'SGN', url: 'https://www.econdb.com/maritime/search/?ab=1.2597199999989215%2C103.59894231689509%2C1.4599999999992832%2C103.86605768310119&center=1.3598620773813224%2C103.73249999999996' },
  { name: 'SHA', url: 'https://www.econdb.com/maritime/search/?ab=30.61329999999954%2C121.23461238886148%2C31.374999999999417%2C122.41938761113772&center=30.99491039335406%2C121.827' },
  { name: 'PUS', url: 'https://www.econdb.com/maritime/search/?ab=35.00087598987936%2C128.791000000002%2C35.18742734255963%2C129.09500000000253&center=35.094205015625136%2C128.94299999999998' },
  { name: 'NGB', url: 'https://www.econdb.com/maritime/search/?ab=29.77170000000072%2C121.72346208958265%2C29.98830000000055%2C122.05653791042175&center=29.88005880866048%2C121.88999999999999' },
  { name: 'RTM', url: 'https://www.econdb.com/maritime/search/?ab=51.82032383773674%2C3.9911099999994804%2C52.02589873798547%2C4.435559999999327&center=51.92322897201237%2C4.213335000000029' },
  { name: 'JEA', url: 'https://www.econdb.com/maritime/search/?ab=24.9644962454761%2C54.99025974991628%2C25.057190080494095%2C55.126640250083256&center=25.010851908316596%2C55.05844999999999' },
  { name: 'TAO', url: 'https://www.econdb.com/maritime/search/?ab=35.964417146727016%2C120.15130974991484%2C36.04716166330999%2C120.28769025008182&center=36.00580025975316%2C120.21950000000004' },
  { name: 'TPP', url: 'https://www.econdb.com/maritime/search/?ab=1.3113712363904568%2C103.47780974991474%2C1.4136276784479236%2C103.61419025008172&center=1.3624999999999972%2C103.54600000000005' },
  { name: 'ANR', url: 'https://www.econdb.com/maritime/search/?ab=51.26170000000042%2C4.202063907795946%2C51.35080000000059%2C4.392096092202564&center=51.30627162348415%2C4.297079999999937' },
  { name: 'KHH', url: 'https://www.econdb.com/maritime/search/?ab=22.52527168558096%2C120.23930974991731%2C22.619721432433053%2C120.3756902500844&center=22.572504649328067%2C120.30750000000012' },
  { name: 'PTM', url: 'https://www.econdb.com/maritime/search/?ab=35.83775220917542%2C-5.582635250082717%2C35.9206293850923%2C-5.446254749915624&center=35.87920163618841%2C-5.514445000000023' },
  { name: 'PKG', url: 'https://www.econdb.com/maritime/search/?ab=2.935000000000045%2C101.25776066840672%2C3.0372199999997207%2C101.39423933159583&center=2.986111189148005%2C101.32600000000002' },
  { name: 'HKG', url: 'https://www.econdb.com/maritime/search/?ab=22.278785790092343%2C113.94200000000035%2C22.41058592401575%2C114.13200000000074&center=22.344701434805856%2C114.03700000000003' },
  { name: 'SHK', url: 'https://www.econdb.com/maritime/search/?ab=22.427885452454262%2C113.80980974991724%2C22.522401774936085%2C113.94619025008433&center=22.475151676614672%2C113.87800000000004' },
  { name: 'LAX', url: 'https://www.econdb.com/maritime/search/?ab=33.70621700405451%2C-118.33169025008391%2C33.79126541893683%2C-118.1953097499171&center=33.74875175516695%2C-118.26350000000002' },
  { name: 'LCH', url: 'https://www.econdb.com/maritime/search/?ab=13.04298562391429%2C100.81980974991689%2C13.142612020147297%2C100.95619025008398&center=13.092803858186016%2C100.88800000000003' },
  { name: 'YTN', url: 'https://www.econdb.com/maritime/search/?ab=22.519165095199853%2C114.19080974991653%2C22.61361902468002%2C114.3271902500835&center=22.566400148543465%2C114.25900000000001' },
  { name: 'LGB', url: 'https://www.econdb.com/maritime/search/?ab=33.713570019457876%2C-118.27969025008332%2C33.79861114467754%2C-118.14330974991651&center=33.75610112685919%2C-118.2115' },
  { name: 'SGN_VN', url: 'https://www.econdb.com/maritime/search/?ab=10.639999999999333%2C106.67784119875967%2C10.769199999999557%2C106.85315880124392&center=10.704606884226152%2C106.76549999999997' },
  { name: 'HAM', url: 'https://www.econdb.com/maritime/search/?ab=53.48808518520602%2C9.887369749915592%2C53.548900302445816%2C10.023750250082685&center=53.51850365558738%2C9.955559999999991' },
  { name: 'NYC', url: 'https://www.econdb.com/maritime/search/?ab=40.618016160236124%2C-74.1891999999998%2C40.71995680636928%2C-74.00999999999942&center=40.66900596262212%2C-74.09960000000001' },
  { name: 'MUN', url: 'https://www.econdb.com/maritime/search/?ab=22.695325489253364%2C69.63080974991544%2C22.789658329678986%2C69.76719025008254&center=22.74250004740827%2C69.69900000000007' },
  { name: 'XMN', url: 'https://www.econdb.com/maritime/search/?ab=24.43220106587465%2C117.95930974991984%2C24.525292509047162%2C118.09569025008705&center=24.47875539510011%2C118.02749999999992' },
  { name: 'NSA', url: 'https://www.econdb.com/maritime/search/?ab=18.899822265719692%2C72.87375974991551%2C18.99656504452105%2C73.01014025008249&center=18.94820066514265%2C72.94195000000002' },
  { name: 'ALG', url: 'https://www.econdb.com/maritime/search/?ab=36.094235279538864%2C-5.497635250084727%2C36.17684341541222%2C-5.361254749917634&center=36.13555021806158%2C-5.429444999999987' },
  { name: 'CMB', url: 'https://www.econdb.com/maritime/search/?ab=6.901175620181533%2C79.7757097499159%2C7.002708981822622%2C79.912090250083&center=6.951945043380206%2C79.84390000000008' },
  { name: 'HPH', url: 'https://www.econdb.com/maritime/search/?ab=20.75868110956104%2C106.69100000000185%2C20.910788866010634%2C106.9080000000024&center=20.83475419708857%2C106.79950000000008' },
  { name: 'ONX', url: 'https://www.econdb.com/maritime/search/?ab=9.313425271922185%2C-79.96429025008274%2C9.414347671459055%2C-79.82790974991565&center=9.363890135957902%2C-79.89610000000005' },
  { name: 'VLC', url: 'https://www.econdb.com/maritime/search/?ab=39.402843832551014%2C-0.38944025008345307%2C39.48183516347268%2C-0.2530597499164742&center=39.44235069652035%2C-0.3212499999999636' },
  { name: 'SSZ', url: 'https://www.econdb.com/maritime/search/?ab=-23.98883530905293%2C-46.39124025008414%2C-23.89535098449433%2C-46.254859749917046&center=-23.942101612533207%2C-46.32304999999997' },
  { name: 'BRY', url: 'https://www.econdb.com/maritime/search/?ab=53.55518128427386%2C8.465559749914064%2C53.61590011918551%2C8.601940250081157&center=53.5855516056362%2C8.533750000000055' },
  { name: 'JKT', url: 'https://www.econdb.com/maritime/search/?ab=-6.1489058957287455%2C106.83330974991895%2C-6.0471993103994635%2C106.96969025008593&center=-6.098055014071534%2C106.90149999999994' },
  { name: 'TXG', url: 'https://www.econdb.com/maritime/search/?ab=38.9564936010604%2C117.71230974991522%2C39.03598847544009%2C117.8486902500822&center=38.99625220114123%2C117.78050000000007' },
  { name: 'BLB', url: 'https://www.econdb.com/maritime/search/?ab=8.908507752387251%2C-79.63934025008302%2C9.009545227883208%2C-79.50295974991599&center=8.959030001294437%2C-79.57114999999999' },
  { name: 'PIR', url: 'https://www.econdb.com/maritime/search/?ab=37.91731468798474%2C23.523909749918175%2C37.99796318530663%2C23.66029025008538&center=37.95765000614389%2C23.59209999999996' },
  { name: 'SAV', url: 'https://www.econdb.com/maritime/search/?ab=32.06707232326022%2C-81.19084025008351%2C32.153710632589124%2C-81.05445974991642&center=32.110401754700604%2C-81.12265000000002' },
  { name: 'NSA_CN', url: 'https://www.econdb.com/maritime/search/?ab=22.59099049002083%2C113.61430974991686%2C22.685395155825233%2C113.75069025008384&center=22.638200931681425%2C113.6825' },
  { name: 'PSD', url: 'https://www.econdb.com/maritime/search/?ab=31.184308646975794%2C32.261109749916045%2C31.271773943660193%2C32.39749025008314&center=31.228051414372885%2C32.32929999999999' },
  { name: 'HOU', url: 'https://www.econdb.com/maritime/search/?ab=29.612200000000286%2C-95.15896536496007%2C29.74860000000055%2C-94.94963463503893&center=29.68042313358839%2C-95.05430000000001' },
  { name: 'VUT', url: 'https://www.econdb.com/maritime/search/?ab=10.467763214183748%2C106.946809749919%2C10.568329921371344%2C107.08319025008609&center=10.518050664396426%2C107.01499999999999' }
];

async function getVessel(vesselName) {
  try {
    const vessel = vesselUrl.find(v => v.name === vesselName);
    if (!vessel) {
      throw new Error(`Vessel ${vesselName} not found`);
    }

    const response = await axios.get(vessel.url);
    return response.data;
  } catch (error) {
    console.error(`Error fetching data for vessel ${vesselName}:`, error.message);
    return null;
  }
}

async function getAllVessel() {
  const results = await Promise.all(vesselUrl.map(async (vessel) => {
    const data = await getVessel(vessel.name);
    return { name: vessel.name, data };
  }));
  return results.filter(result => result.data !== null);
}

module.exports = {
  getVessel,
  getAllVessel
};
